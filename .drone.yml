---
kind: pipeline
name: default
steps:
- name: test
  image: golang:1.10-alpine
  commands:
   - "go test"
- name: build
  image: golang:1.10-alpine
  commands:
   - "go build -o ./myapp" 
- name: publish  
  image: plugins/gcr
  settings:
    repo: eu.gcr.io/king-up-prod/go-sample-app
    tags: latest
    json_key: 
      from_secret: google_credentials